# township-access API docs

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [townshipAccess](#townshipaccess)
    -   [Parameters](#parameters)
    -   [Examples](#examples)
    -   [access.get](#accessget)
        -   [Parameters](#parameters-1)
    -   [access.create](#accesscreate)
        -   [Parameters](#parameters-2)
    -   [access.update](#accessupdate)
        -   [Parameters](#parameters-3)
    -   [access.destroy](#accessdestroy)
        -   [Parameters](#parameters-4)
    -   [access.verify](#accessverify)
        -   [Parameters](#parameters-5)
    -   [access.verifyScopes](#accessverifyscopes)
        -   [Parameters](#parameters-6)
    -   [access.verifyScope](#accessverifyscope)
        -   [Parameters](#parameters-7)
    -   [access.lock](#accesslock)
        -   [Parameters](#parameters-8)

## townshipAccess

Create a township access db

### Parameters

-   `leveldb` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** an instance of a leveldb created using [level](https://github.com/level/)

### Examples

```javascript
const townshipAccess = require('township-access')
const level = require('level')

const db = level('./db')
const access = townshipAccess(db)
```

Returns **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** 

### access.get

Get a set of access scopes

#### Parameters

-   `key` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the key for the access scopes
-   `callback` **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** callback with `err`, `data` arguments

### access.create

Create a set of access scopes

#### Parameters

-   `key` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the key for the access scopes
-   `scopes` **[array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of strings
-   `callback` **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** callback with `err`, `data` arguments

### access.update

Update a set of access scopes

#### Parameters

-   `key` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the key for the access scopes
-   `scopes` **[array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of strings
-   `callback` **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** callback with `err`, `data` arguments

### access.destroy

Delete a set of access scopes

#### Parameters

-   `key` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the key for the access scopes
-   `callback` **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** callback with `err`, `data` arguments

### access.verify

Verify that a set of scopes match what is in the db for a key

#### Parameters

-   `key` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the key for the access scopes
-   `scopes` **[array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of strings with scopes that must match
-   `callback` **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** callback with `err`, `data` arguments

### access.verifyScopes

Verify that a set of scopes match what is available in an object with a scopes property

#### Parameters

-   `data` **[object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** 
    -   `data.scopes` **[array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of strings
-   `scopes` **[array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of strings with scopes that must match

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** returns `true` if `scopes` are all found in `data.scopes`

### access.verifyScope

Verify that a scope matches what is available in an object with a scopes property

#### Parameters

-   `key` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the key for the access scopes
-   `callback` **[function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** callback with `err`, `data` arguments

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** returns `true` if `scope` is found in `data.scopes`

### access.lock

Lock an access db key while performing an operation on it

#### Parameters

-   `key` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** the key for the access scopes
-   `mode` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** can be `r`, `w`, or `rw`, default is `w` (optional, default `w`)

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** returns `true` if `scope` is found in `data.scopes`
